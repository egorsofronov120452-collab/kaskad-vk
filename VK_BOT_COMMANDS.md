# Команды VK бота

## !пост - Публикация в группу

**Доступ**: Только РС в чате Руководства

**Использование**: 
```
!пост (ответом на сообщение)
```

**Описание**: 
Публикует сообщение на стену группы 2. Поддерживает все типы вложений:
- Фотографии (со сжатием)
- Видео
- Аудио
- Документы
- Опросы
- Записи со стены

**Пример**:
1. Напишите сообщение с текстом и прикрепите фото/видео/документы
2. Ответьте на это сообщение командой `!пост`
3. Сообщение будет опубликовано в группе со всеми вложениями

---

## !приветствие - Установка приветствия

**Доступ**: Только РС

**Использование**: 
```
!приветствие [id чата] (ответом на сообщение)
```

**Описание**: 
Устанавливает приветствие для новых участников чата. Поддерживает:
- Текст с упоминанием {user} (будет заменено на упоминание нового участника)
- Все типы вложений (фото, видео, гифки, документы и т.д.)

**Параметры**:
- `id чата` (опционально) - ID чата, для которого устанавливается приветствие. Если не указан, приветствие устанавливается для текущего чата.

**Примеры**:
```
!приветствие
```
Установит приветствие для текущего чата

```
!приветствие 123
```
Установит приветствие для чата с ID 123

**Как использовать**:
1. Создайте сообщение с текстом приветствия (используйте {user} для упоминания)
2. Прикрепите фото/гифку/видео если нужно
3. Ответьте на это сообщение командой `!приветствие [id чата]`

---

## !закреп - Закрепление сообщения

**Доступ**: Только РС

**Использование**: 
```
!закреп [id чата] (ответом на сообщение)
```

**Описание**: 
Закрепляет сообщение в чате. Поддерживает два режима:
1. **Текущий чат**: Закрепляет сообщение, на которое вы ответили
2. **Другой чат**: Отправляет копию сообщения в указанный чат и закрепляет её там

**Параметры**:
- `id чата` (опционально) - ID чата, где нужно закрепить сообщение. Если не указан, закрепляет в текущем чате.

**Поддерживаемые вложения** (при отправке в другой чат):
- Фотографии
- Видео
- Аудио
- Документы
- Опросы
- Записи со стены

**Примеры**:
```
!закреп
```
Закрепит сообщение в текущем чате

```
!закреп 123
```
Отправит копию сообщения в чат 123 и закрепит её там

---

## !инвайт - Приглашение с ролью

**Доступ**: РС и СС

**Использование**: 
```
!инвайт [ссылка на пользователя] [роль]
```

**Описание**: 
Приглашает пользователя в чаты согласно его роли. Использует токен группы для приглашения.

**Доступные роли**:

1. **рс** (Руководящий Состав)
   - Все чаты: Руководство, Старший Состав, Доска Объявлений, Диспетчерская, Флудилка, Журнал Активности

2. **сс** (Старший Состав)
   - Все чаты кроме Руководства: Старший Состав, Доска Объявлений, Диспетчерская, Флудилка, Журнал Активности

3. **курьер**
   - Флудилка, Журнал Активности, Диспетчерская, Доска Объявлений

4. **стажёр**
   - Учебный Центр, Доска Объявлений, Диспетчерская

5. **спонсор**
   - Дополнительная роль к другим
   - Добавляет доступ только к чату Спонсорства
   - Можно назначить вместе с основной ролью

**Форматы ссылки**:
- `vk.com/id123456789`
- `https://vk.com/id123456789`
- `[vk.com/id123456789|Имя]`
- `id123456789`
- `123456789`

**Примеры**:
```
!инвайт vk.com/id123456789 рс
```
Приглашает пользователя со всеми правами РС

```
!инвайт https://vk.com/id987654321 курьер
```
Приглашает пользователя с правами курьера

```
!инвайт id555555555 спонсор
```
Добавляет пользователя в чат спонсорства (дополнительно к его текущим правам)

**Логирование**:
Все приглашения логируются в чат Руководства с информацией о том, кто и кого пригласил.

---

## !кик - Удаление пользователя

**Доступ**: РС и СС

**Использование**: 
```
!кик [ссылка на пользователя] [дни бана|спонсор]
```

**Описание**: 
Удаляет пользователя из чатов. Поддерживает два режима:

1. **Обычный кик**: Удаляет из всех чатов + опционально добавляет в ЧС
2. **Кик из спонсорской**: Удаляет только из чата спонсорства

**Параметры**:
- `дни бана` - количество дней бана (0 или 999 для перманентного)
- `спонсор` - ключевое слово для удаления только из спонсорской беседы

**Примеры**:
```
!кик vk.com/id123456789 30
```
Кикнет из всех чатов и добавит в ЧС на 30 дней

```
!кик vk.com/id123456789 999
```
Кикнет из всех чатов и добавит в ЧС перманентно

```
!кик vk.com/id123456789 спонсор
```
Удалит только из спонсорской беседы

**Логирование**:
Все кики логируются в чат Руководства.

---

## !увед - Массовое уведомление

**Доступ**: РС и СС

**Использование**: 
```
!увед
```

**Описание**: 
Упоминает всех участников текущего чата (отправляет уведомление всем).

**Примечание**: 
VK позволяет упоминать до 10 пользователей за раз, поэтому бот может отправить несколько сообщений.

---

## ID чатов

Для команд `!приветствие` и `!закреп` нужны ID чатов. Их можно узнать следующими способами:

1. Открыть беседу в браузере и посмотреть в URL: `...?sel=c123` - ID чата = 123
2. Использовать команду в нужной беседе без параметра ID
3. Посмотреть в настройках беседы

**Список чатов** (настраивается в .env):
- VK_CHAT_RUKOVODSTVO_ID - Руководство
- VK_CHAT_SS_ID - Старший Состав
- VK_CHAT_UCHEBNY_ID - Учебный Центр
- VK_CHAT_DOSKA_ID - Доска Объявлений
- VK_CHAT_DISPETCHERSKAYA_ID - Диспетчерская
- VK_CHAT_FLUDILKA_ID - Флудилка
- VK_CHAT_ZHURNAL_ID - Журнал Активности
- VK_CHAT_SPONSOR_ID - Спонсорская беседа
